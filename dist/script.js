let myPokedex=function(){let e=[],t={},n=document.createDocumentFragment(),a={normal:"linear-gradient(45deg, #A8A878, #C0C0A0)",fighting:"linear-gradient(45deg, #C03028, #E05050)",flying:"linear-gradient(45deg, #A890F0, #C0B0FF)",poison:"linear-gradient(45deg, #A040A0, #C060E0)",ground:"linear-gradient(45deg, #E0C068, #F0E090)",rock:"linear-gradient(45deg, #B8A038, #D0C070)",bug:"linear-gradient(45deg, #A8B820, #C0D060)",ghost:"linear-gradient(45deg, #705898, #9080C0)",steel:"linear-gradient(45deg, #B8B8D0, #D0D0FF)",fire:"linear-gradient(45deg, #F08030, #F0A060)",water:"linear-gradient(45deg, #6890F0, #88B0FF)",grass:"linear-gradient(45deg, #78C850, #98E890)",electric:"linear-gradient(45deg, #F8D030, #F8F060)",psychic:"linear-gradient(45deg, #F85888, #F880B0)",ice:"linear-gradient(45deg, #98D8D8, #B8F8F8)",dragon:"linear-gradient(45deg, #7038F8, #9070FF)",dark:"linear-gradient(45deg, #705848, #908078)",fairy:"linear-gradient(45deg, #EE99AC, #FFB8D0)",unknown:"linear-gradient(45deg, #68A090, #88C0B0)",shadow:"linear-gradient(45deg, #604E82, #8070A0)"},i={normal:"#A8A878",fighting:"#C03028",flying:"#A890F0",poison:"#A040A0",ground:"#E0C068",rock:"#B8A038",bug:"#A8B820",ghost:"#705898",steel:"#B8B8D0",fire:"#F08030",water:"#6890F0",grass:"#78C850",electric:"#F8D030",psychic:"#F85888",ice:"#98D8D8",dragon:"#7038F8",dark:"#705848",fairy:"#EE99AC",unknown:"#68A090",shadow:"#604E82"},r={hp:"#4CAF50",attack:"#F44336",defense:"#2196F3","special-attack":"#9C27B0","special-defense":"#FFD700",speed:"#FF9800"};function d(t){let n=e.some(e=>e.name===t.name);n?console.warn(`Pok\xe9mon with the name '${t.name}' already exists.`):e=[...e,t]}async function o(e){if(t[e.name])return t[e.name];if(!e.detailsUrl)throw Error("No details URL provided for the Pok\xe9mon.");try{let n=await fetch(e.detailsUrl),a=await n.json(),i={name:e.name,height:a.height,weight:a.weight,types:a.types.map(e=>e.type.name),imgUrls:a.sprites,abilities:a.abilities,stats:a.stats};return t[e.name]=i,i}catch(r){throw console.error(`Error loading details for ${e.name}:`,r),r}}return{add:d,getAll:function t(){return[...e]},findPokemonByName:function t(n){let a;if("string"!=typeof n){console.error("pokemonName must be a string");return}return(a=e.find(e=>e.name.toLowerCase()===n.toLowerCase()))||console.log("Pokemon not found in findPokemonByName function"),a},addListItem:function e(d){if(!d.name){console.error("<li> item failed to be added in addListItem because object ",d," does not have a name property");return}let o=document.createElement("li"),l=document.createElement("button"),s=document.createElement("p"),$=document.createElement("img");o.classList.add("text-center","poke-card","m-1"),l.classList.add("btn","poke-button"),l.setAttribute("type","button"),l.setAttribute("data-toggle","modal"),l.setAttribute("data-target","#pokemon-details-modal"),l.setAttribute("aria-label",`View details for ${d.name}`),function e(n,i){let r=t[n.name].types[0],d=a[r]||"#A8A878";i.style.background=d}(d,o),$.setAttribute("src",t[d.name].imgUrls.other.dream_world.front_default),$.setAttribute("loading","lazy"),$.setAttribute("alt",`${d.name} image`),$.style.filter="drop-shadow(0 0 3px black)",s.textContent=d.name,l.appendChild($),l.appendChild(s),l.addEventListener("click",function(){(function e(n){!function e(){let t=document.getElementById("types");for(;t.firstChild;)t.removeChild(t.firstChild)}();let d=t[n.name],o=document.getElementById("poke-name"),l=document.querySelector(".modal-header"),s=document.getElementById("types"),$=document.getElementById("height"),g=document.getElementById("weight"),m=document.getElementById("pokemon-details-img");d.types.forEach(e=>{let t=document.createElement("p");t.textContent=e,t.classList.add("mr-4","ml-4"),t.style.background=i[e],s.appendChild(t)}),l.style.background=a[d.types[0]],m.setAttribute("src",`${t[n.name].imgUrls.other.dream_world.front_default}`),m.setAttribute("alt",`${n.name} image`),o.innerText=d.name,$.innerText=d.height,g.innerText=d.weight,d.stats.forEach(e=>{var t,n;t=e.stat.name,n=e.base_stat,document.getElementById(`${t}`).style.width=n/160*100+"%",document.getElementById(`${t}`).style.backgroundColor=r[t]})})(d)}),o.appendChild(l),n.appendChild(o)},appendAllItems:function e(){let t=document.querySelector("#pokemon-list");t?t.appendChild(n):console.error("The #pokemon-list element does not exist in the DOM")},loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(e=>e.json()).then(e=>{e.results.forEach(e=>{d({name:e.name,detailsUrl:e.url})})}).catch(e=>{console.error("Error loading Pok\xe9mon list:",e)})},loadDetails:o}}();myPokedex.loadList().then(function(){myPokedex.getAll().forEach(function(e){myPokedex.loadDetails(e).then(function(){myPokedex.addListItem(e)}).then(function(){myPokedex.appendAllItems()})})});
